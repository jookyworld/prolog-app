# ProLog App - í”„ë¡œì íŠ¸ ê°€ì´ë“œ

## ëª©ì°¨

1. [í´ë” êµ¬ì¡°](#1-í´ë”-êµ¬ì¡°)
2. [ì„¤ì • íŒŒì¼](#2-ì„¤ì •-íŒŒì¼)
3. [í™”ë©´ê³¼ ë¼ìš°íŒ… (app/)](#3-í™”ë©´ê³¼-ë¼ìš°íŒ…-app)
4. [ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ (components/)](#4-ì¬ì‚¬ìš©-ì»´í¬ë„ŒíŠ¸-components)
5. [ì „ì—­ ìƒíƒœ ê´€ë¦¬ (contexts/)](#5-ì „ì—­-ìƒíƒœ-ê´€ë¦¬-contexts)
6. [ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ìœ í‹¸ë¦¬í‹° (lib/)](#6-ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§ê³¼-ìœ í‹¸ë¦¬í‹°-lib)
7. [ì¸ì¦ êµ¬ì¡°ì™€ íë¦„](#7-ì¸ì¦-êµ¬ì¡°ì™€-íë¦„)
8. [ì£¼ìš” ê¸°ëŠ¥ë³„ íë¦„](#8-ì£¼ìš”-ê¸°ëŠ¥ë³„-íë¦„)
9. [ê°œë°œ íŒ¨í„´ ê°€ì´ë“œ](#9-ê°œë°œ-íŒ¨í„´-ê°€ì´ë“œ)

---

## 1. í´ë” êµ¬ì¡°

```
prolog-app/
â”œâ”€â”€ app/                    â† í™”ë©´(í˜ì´ì§€) ì •ì˜ (íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…)
â”‚   â”œâ”€â”€ _layout.tsx         â† ì•± ì „ì²´ë¥¼ ê°ì‹¸ëŠ” ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ (auth)/             â† ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ììš© í™”ë©´ ê·¸ë£¹
â”‚   â”‚   â”œâ”€â”€ _layout.tsx
â”‚   â”‚   â”œâ”€â”€ login.tsx
â”‚   â”‚   â””â”€â”€ signup.tsx
â”‚   â””â”€â”€ (tabs)/             â† ë¡œê·¸ì¸ í›„ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ ê·¸ë£¹
â”‚       â”œâ”€â”€ _layout.tsx
â”‚       â”œâ”€â”€ index.tsx       â† í™ˆ íƒ­ (í”Œë ˆì´ìŠ¤í™€ë”)
â”‚       â”œâ”€â”€ routine/
â”‚       â”‚   â”œâ”€â”€ _layout.tsx
â”‚       â”‚   â”œâ”€â”€ index.tsx   â† ë£¨í‹´ ëª©ë¡
â”‚       â”‚   â”œâ”€â”€ [id].tsx    â† ë£¨í‹´ ìƒì„¸
â”‚       â”‚   â”œâ”€â”€ new.tsx     â† ë£¨í‹´ ìƒì„±
â”‚       â”‚   â””â”€â”€ select-exercises.tsx â† ìš´ë™ ì¢…ëª© ì„ íƒ
â”‚       â”œâ”€â”€ workout/
â”‚       â”‚   â”œâ”€â”€ _layout.tsx
â”‚       â”‚   â”œâ”€â”€ index.tsx   â† ìš´ë™ íƒ­ ë©”ì¸ (ì•ˆë‚´ ì¹´ë“œ)
â”‚       â”‚   â””â”€â”€ session.tsx â† ìš´ë™ ì„¸ì…˜ (í•µì‹¬ ê¸°ëŠ¥)
â”‚       â”œâ”€â”€ community.tsx   â† ì»¤ë®¤ë‹ˆí‹° íƒ­ (í”Œë ˆì´ìŠ¤í™€ë”)
â”‚       â””â”€â”€ profile/
â”‚           â”œâ”€â”€ _layout.tsx
â”‚           â”œâ”€â”€ index.tsx   â† í”„ë¡œí•„ ë©”ì¸
â”‚           â”œâ”€â”€ settings.tsxâ† ì„¤ì • (ë¡œê·¸ì•„ì›ƒ/íƒˆí‡´)
â”‚           â””â”€â”€ history/
â”‚               â”œâ”€â”€ _layout.tsx
â”‚               â”œâ”€â”€ index.tsx  â† ìš´ë™ ê¸°ë¡ ëª©ë¡
â”‚               â””â”€â”€ [id].tsx   â† ìš´ë™ ê¸°ë¡ ìƒì„¸
â”œâ”€â”€ components/             â† ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ AuthGuard.tsx
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ Button.tsx
â”‚       â”œâ”€â”€ Input.tsx
â”‚       â”œâ”€â”€ Card.tsx
â”‚       â””â”€â”€ Label.tsx
â”œâ”€â”€ contexts/               â† React Context (ì „ì—­ ìƒíƒœ ê´€ë¦¬)
â”‚   â””â”€â”€ auth-context.tsx
â”œâ”€â”€ lib/                    â† ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ constants.ts        â† ìƒìˆ˜ (API URL, ìƒ‰ìƒ)
â”‚   â”œâ”€â”€ utils.ts            â† ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”œâ”€â”€ api.ts              â† HTTP í´ë¼ì´ì–¸íŠ¸ (í† í° ê´€ë¦¬ í¬í•¨)
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth.ts         â† ì¸ì¦ API
â”‚   â”‚   â”œâ”€â”€ exercise.ts     â† ìš´ë™ ì¢…ëª© API
â”‚   â”‚   â”œâ”€â”€ routine.ts      â† ë£¨í‹´ API
â”‚   â”‚   â””â”€â”€ workout.ts      â† ìš´ë™ ì„¸ì…˜ API
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ auth.ts         â† ì¸ì¦ íƒ€ì…
â”‚   â”‚   â”œâ”€â”€ exercise.ts     â† ìš´ë™ ì¢…ëª© íƒ€ì…
â”‚   â”‚   â”œâ”€â”€ routine.ts      â† ë£¨í‹´ íƒ€ì…
â”‚   â”‚   â””â”€â”€ workout.ts      â† ìš´ë™ ì„¸ì…˜ íƒ€ì…
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ exercise-selection.ts â† ìš´ë™ ì„ íƒ ì„ì‹œ ì €ì¥ì†Œ
â”‚   â””â”€â”€ validations/
â”‚       â””â”€â”€ auth.ts         â† Zod ìœ íš¨ì„± ê²€ì¦ ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ app.json
â”œâ”€â”€ babel.config.js
â”œâ”€â”€ metro.config.js
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ global.css
â””â”€â”€ .env
```

---

## 2. ì„¤ì • íŒŒì¼

| íŒŒì¼                 | ì—­í•                                                           | ì–¸ì œ ìˆ˜ì •í•˜ë‚˜                              |
| -------------------- | ------------------------------------------------------------- | ------------------------------------------ |
| `app.json`           | Expo í”„ë¡œì íŠ¸ ì„¤ì • (ì•± ì´ë¦„, ì•„ì´ì½˜, ìŠ¤í”Œë˜ì‹œ, í”Œë«í¼ë³„ ì„¤ì •) | ì•± ì´ë¦„/ì•„ì´ì½˜ ë³€ê²½, ë„¤ì´í‹°ë¸Œ ê¶Œí•œ ì¶”ê°€ ì‹œ |
| `babel.config.js`    | JSXë¥¼ NativeWindê°€ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •                            | ê±°ì˜ ìˆ˜ì •í•  ì¼ ì—†ìŒ                        |
| `metro.config.js`    | Metro ë²ˆë“¤ëŸ¬ì— NativeWind ì—°ê²°                                | ê±°ì˜ ìˆ˜ì •í•  ì¼ ì—†ìŒ                        |
| `tailwind.config.js` | ì»¤ìŠ¤í…€ ìƒ‰ìƒ, í°íŠ¸ ë“± ë””ìì¸ í† í° ì •ì˜                         | ìƒˆ ìƒ‰ìƒ/ìŠ¤íƒ€ì¼ ì¶”ê°€ ì‹œ                     |
| `tsconfig.json`      | TypeScript ì„¤ì • + `@/*` ê²½ë¡œ ë³„ì¹­                             | ê²½ë¡œ ë³„ì¹­ ì¶”ê°€ ì‹œ                          |
| `global.css`         | Tailwindì˜ `@tailwind` ì§€ì‹œì–´ 3ì¤„                             | ì „ì—­ ì»¤ìŠ¤í…€ CSS ì¶”ê°€ ì‹œ                    |
| `.env`               | í™˜ê²½ë³€ìˆ˜ (`EXPO_PUBLIC_API_URL`)                              | API ì„œë²„ ì£¼ì†Œ ë³€ê²½ ì‹œ                      |

---

## 3. í™”ë©´ê³¼ ë¼ìš°íŒ… (app/)

Expo RouterëŠ” **íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…**ì„ ì‚¬ìš©í•œë‹¤. íŒŒì¼ ê²½ë¡œê°€ ê³§ URL ê²½ë¡œê°€ ëœë‹¤.

### 3.1 ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ â€” `app/_layout.tsx`

```tsx
<AuthProvider>
  {" "}
  â† ì „ì—­ ì¸ì¦ ìƒíƒœ ì œê³µ
  <StatusBar /> â† ìƒíƒœë°” ë°ì€ ê¸€ì”¨ (ë‹¤í¬ í…Œë§ˆ)
  <AuthGuard>
    {" "}
    â† ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ ë¼ìš°íŒ… ì œì–´
    <Slot /> â† ì—¬ê¸°ì— í•˜ìœ„ í™”ë©´ì´ ë Œë”ë§ë¨
  </AuthGuard>
</AuthProvider>
```

- `Slot` â€” í˜„ì¬ URLì— í•´ë‹¹í•˜ëŠ” ìì‹ ë ˆì´ì•„ì›ƒ/í™”ë©´ì„ ë Œë”ë§í•˜ëŠ” ìë¦¬. ì›¹ì˜ `{children}`ê³¼ ê°™ì€ ê°œë….

### 3.2 ë¼ìš°íŠ¸ ê·¸ë£¹ â€” `(auth)`, `(tabs)`

ê´„í˜¸ `()` í´ë”ëŠ” **URLì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ê·¸ë£¹**ì´ë‹¤. ë ˆì´ì•„ì›ƒì„ ë¶„ë¦¬í•˜ê¸° ìœ„í•œ ìš©ë„.

- `(auth)` â€” ë¡œê·¸ì¸/íšŒì›ê°€ì… í™”ë©´. **Stack ë„¤ë¹„ê²Œì´ì…˜** (í™”ë©´ì´ ìœ„ë¡œ ìŒ“ì´ëŠ” ë°©ì‹)
- `(tabs)` â€” ë¡œê·¸ì¸ í›„ í™”ë©´. **Tab ë„¤ë¹„ê²Œì´ì…˜** (í•˜ë‹¨ íƒ­ ë°©ì‹)

### 3.3 Auth í™”ë©´

#### ë¡œê·¸ì¸ â€” `app/(auth)/login.tsx`

```
ì‚¬ìš©ì ì…ë ¥ (ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸)
  â””â”€ zod ìŠ¤í‚¤ë§ˆ ìœ íš¨ì„± ê²€ì‚¬ (react-hook-form)
       â””â”€ useAuth().login(data) í˜¸ì¶œ
            â”œâ”€ ì„±ê³µ â†’ router.replace("/(tabs)")
            â””â”€ ì‹¤íŒ¨ â†’ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
```

#### íšŒì›ê°€ì… â€” `app/(auth)/signup.tsx`

2ë‹¨ê³„ í¼ êµ¬ì¡° (í”„ë¡œê·¸ë ˆìŠ¤ ë°” í‘œì‹œ):

```
Step 1: ê³„ì • ì •ë³´ (ì•„ì´ë”” 4~20ì, ë¹„ë°€ë²ˆí˜¸ 8~30ì, ì´ë©”ì¼, ë‹‰ë„¤ì„ 2~10ì)
  â””â”€ "ë‹¤ìŒ" ë²„íŠ¼ â†’ step1Data ì €ì¥ í›„ Step 2ë¡œ

Step 2: ì‹ ì²´ ì •ë³´ (ì„±ë³„ MALE/FEMALE í† ê¸€, í‚¤, ì²´ì¤‘)
  â””â”€ "ê°€ì… ì™„ë£Œ" ë²„íŠ¼ â†’ step1Data + step2Data í•©ì³ì„œ signup() í˜¸ì¶œ
       â”œâ”€ ì„±ê³µ â†’ ìë™ ë¡œê·¸ì¸ â†’ /(tabs)ë¡œ ì´ë™
       â””â”€ ì‹¤íŒ¨ â†’ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
```

### 3.4 Tabs ë ˆì´ì•„ì›ƒ â€” `app/(tabs)/_layout.tsx`

```
<Tabs>
  index     â†’ "í™ˆ"      (Home ì•„ì´ì½˜)       â† í”Œë ˆì´ìŠ¤í™€ë”
  routine   â†’ "ë£¨í‹´"    (LayoutGrid ì•„ì´ì½˜)
  workout   â†’ "ìš´ë™"    (Dumbbell ì•„ì´ì½˜)
  community â†’ "ì»¤ë®¤ë‹ˆí‹°" (Users ì•„ì´ì½˜)      â† í”Œë ˆì´ìŠ¤í™€ë”
  profile   â†’ "ë‚´ ì •ë³´"  (User ì•„ì´ì½˜)
</Tabs>
```

í•˜ë‹¨ 5ê°œ íƒ­ì„ ì •ì˜. ê° íƒ­ í´ë” ë‚´ `_layout.tsx`ëŠ” Stack ë„¤ë¹„ê²Œì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„¸ í™”ë©´ìœ¼ë¡œì˜ ì „í™˜ì„ ì§€ì›í•œë‹¤.

### 3.5 ë£¨í‹´ íƒ­

#### ë£¨í‹´ ëª©ë¡ â€” `app/(tabs)/routine/index.tsx`

- `routineApi.getRoutines()`ìœ¼ë¡œ ëª©ë¡ ì¡°íšŒ
- ê° ì¹´ë“œ: ì œëª©, ì„¤ëª…, ìƒì„± ë‚ ì§œ, í™œì„± ë°°ì§€
- ë¡œë”©/ì—ëŸ¬/ë¹ˆ ìƒíƒœ ì²˜ë¦¬
- ì¹´ë“œ íƒ­ â†’ `/(tabs)/routine/[id]`ë¡œ ì´ë™
- "+" ë²„íŠ¼ â†’ `/(tabs)/routine/new`ë¡œ ì´ë™ (ë£¨í‹´ ìƒì„±)
- `useFocusEffect`ë¡œ í™”ë©´ ë³µê·€ ì‹œ ëª©ë¡ ìë™ ê°±ì‹ 

#### ë£¨í‹´ ìƒì„¸ â€” `app/(tabs)/routine/[id].tsx`

- `routineApi.getRoutineDetail(id)`ë¡œ ìƒì„¸ ì¡°íšŒ
- ìš”ì•½ ì¹´ë“œ: ì œëª© + í™œì„± ë°°ì§€ + ì„¤ëª…
- ìš´ë™ êµ¬ì„± ëª©ë¡: ìˆœì„œ ë²ˆí˜¸, ìš´ë™ëª…, ë¶€ìœ„, ì„¸íŠ¸ ìˆ˜, íœ´ì‹ ì‹œê°„
- **"ìš´ë™ ì‹œì‘" ë²„íŠ¼** â†’ `/(tabs)/workout/session?routineId=<id>`
- "ë£¨í‹´ ì‚­ì œ" ë²„íŠ¼ â†’ í™•ì¸ Alert â†’ API ì‚­ì œ â†’ ëª©ë¡ìœ¼ë¡œ ë³µê·€

#### ë£¨í‹´ ìƒì„± â€” `app/(tabs)/routine/new.tsx`

ë£¨í‹´ì„ ìƒˆë¡œ ë§Œë“œëŠ” í™”ë©´. ì´ë¦„/ì„¤ëª… ì…ë ¥ + ìš´ë™ ì¢…ëª© êµ¬ì„±.

**ë ˆì´ì•„ì›ƒ:**

- í—¤ë”: â† ë’¤ë¡œê°€ê¸° | "ë£¨í‹´ ë§Œë“¤ê¸°" | "ì €ì¥" ë²„íŠ¼
- ë£¨í‹´ ì´ë¦„ ì…ë ¥ (í•„ìˆ˜), ì„¤ëª… ì…ë ¥ (ì„ íƒ)
- êµ¬ì„± ì¢…ëª© ë¦¬ìŠ¤íŠ¸ (ìš´ë™ ì¹´ë“œ)
- "+ ì¢…ëª© ì¶”ê°€" ë²„íŠ¼

**ìš´ë™ ì¹´ë“œ ê¸°ëŠ¥:**

- ìˆœì„œ ë²ˆí˜¸ í‘œì‹œ
- ì„¸íŠ¸ ìˆ˜ ì¡°ì ˆ: Â±1, ë²”ìœ„ 1~20
- íœ´ì‹ ì‹œê°„ ì¡°ì ˆ: Â±30ì´ˆ, ë²”ìœ„ 0~600ì´ˆ, "Në¶„ Nì´ˆ" í¬ë§·
- ìˆœì„œ ë³€ê²½ (â†‘â†“ ë²„íŠ¼)
- ì‚­ì œ (ğŸ—‘ ë²„íŠ¼)

**ì €ì¥ ì¡°ê±´:** ì œëª©ì´ ì…ë ¥ë˜ê³  ìš´ë™ì´ 1ê°œ ì´ìƒì¼ ë•Œ ì €ì¥ ë²„íŠ¼ í™œì„±í™”

**ë°ì´í„° í”Œë¡œìš°:**

```
"ì¢…ëª© ì¶”ê°€" â†’ select-exercises í™”ë©´ ì´ë™
  â†’ ì„ íƒ ì™„ë£Œ í›„ ë³µê·€ â†’ useFocusEffectì—ì„œ exercise-selection ì €ì¥ì†Œ ì½ê¸°
  â†’ ì„ íƒëœ ìš´ë™ì„ itemsì— ì¶”ê°€ (ê¸°ë³¸ê°’: 4ì„¸íŠ¸, 90ì´ˆ íœ´ì‹)
"ì €ì¥" â†’ routineApi.createRoutine() â†’ ì„±ê³µ ì‹œ ëª©ë¡ìœ¼ë¡œ ë³µê·€
```

#### ìš´ë™ ì¢…ëª© ì„ íƒ â€” `app/(tabs)/routine/select-exercises.tsx`

ë£¨í‹´ì— ì¶”ê°€í•  ìš´ë™ì„ ë‹¤ì¤‘ ì„ íƒí•˜ëŠ” í™”ë©´.

**ë ˆì´ì•„ì›ƒ:**

- í—¤ë”: â† ë’¤ë¡œê°€ê¸° | "ì¢…ëª© ì„ íƒ" | "í™•ì¸ (N)" ë²„íŠ¼
- ê²€ìƒ‰ ì…ë ¥ (ìš´ë™ ì´ë¦„)
- ë¶€ìœ„ í•„í„° ì¹© (ê°€ë¡œ ìŠ¤í¬ë¡¤): ì „ì²´, ê°€ìŠ´, ë“±, ì–´ê¹¨, í•˜ì²´, íŒ”, ì½”ì–´, ìœ ì‚°ì†Œ, ê¸°íƒ€
- ìš´ë™ ëª©ë¡ (FlatList, ì²´í¬ë°•ìŠ¤ ë‹¤ì¤‘ ì„ íƒ)

**ë™ì‘:**

- `exerciseApi.getExercises()`ë¡œ ì „ì²´ ìš´ë™ ëª©ë¡ ë¡œë“œ
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ í•„í„°: ë¶€ìœ„ + ê²€ìƒ‰ì–´
- "í™•ì¸" â†’ `setSelectedExercises()`ë¡œ ì„ì‹œ ì €ì¥ì†Œì— ì €ì¥ â†’ `router.back()`

**í™”ë©´ ê°„ ë°ì´í„° ì „ë‹¬:**
`lib/store/exercise-selection.ts`ì˜ ëª¨ë“ˆ ë ˆë²¨ ë³€ìˆ˜ ì‚¬ìš©. `set` í›„ `get`í•˜ë©´ ìë™ ì´ˆê¸°í™”ë˜ì–´ 1íšŒì„± ì „ë‹¬ì— ì í•©.

### 3.6 ìš´ë™ íƒ­

#### ìš´ë™ ë©”ì¸ â€” `app/(tabs)/workout/index.tsx`

- "ë£¨í‹´ìœ¼ë¡œ ìš´ë™ ì‹œì‘" ì•ˆë‚´ ì¹´ë“œ
- "ë£¨í‹´ ë³´ëŸ¬ê°€ê¸°" ë²„íŠ¼ â†’ `/(tabs)/routine`ìœ¼ë¡œ ì´ë™

#### ìš´ë™ ì„¸ì…˜ â€” `app/(tabs)/workout/session.tsx` â˜… í•µì‹¬ ê¸°ëŠ¥

ë£¨í‹´ ê¸°ë°˜ ìš´ë™ ê¸°ë¡ í™”ë©´. `routineId` ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì§„ì….

**ë ˆì´ì•„ì›ƒ:**

- í—¤ë”: "ê·¸ë§Œí•˜ê¸°" (ì™¼ìª½) | ë£¨í‹´ ì œëª© (ê°€ìš´ë°) | "ì™„ë£Œ" (ì˜¤ë¥¸ìª½)
- ìš´ë™ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ (íš¡ ìŠ¤í¬ë¡¤, í˜„ì¬ ìš´ë™ primary í•˜ì´ë¼ì´íŠ¸)
- ì„¸íŠ¸ í…Œì´ë¸”: ì„¸íŠ¸ ë²ˆí˜¸ | ë¬´ê²Œ(kg) ì…ë ¥ | íšŸìˆ˜ ì…ë ¥ | ì™„ë£Œ ì²´í¬(âœ“)
- ì„¸íŠ¸ ì¶”ê°€/ì‚­ì œ ë²„íŠ¼
- "ë‹¤ìŒ ìš´ë™" ë²„íŠ¼ (ë§ˆì§€ë§‰ ìš´ë™ì´ ì•„ë‹ ë•Œ)
- í•˜ë‹¨ íƒ€ì´ë¨¸ ë°” (ê²½ê³¼ ì‹œê°„ HH:MM:SS)

**ë™ì‘ íë¦„:**

```
ì§„ì… ì‹œ:
  â”œâ”€ routineApi.getRoutineDetail(routineId) â†’ ìš´ë™ êµ¬ì„± ì´ˆê¸°í™”
  â””â”€ workoutApi.startSession(routineId) â†’ sessionId ì €ì¥

ìš´ë™ ì¤‘:
  â”œâ”€ ìš´ë™ íƒ­ ì „í™˜ìœ¼ë¡œ ìš´ë™ ê°„ ì´ë™
  â”œâ”€ ì„¸íŠ¸ë³„ ë¬´ê²Œ/íšŸìˆ˜ ì…ë ¥ + ì™„ë£Œ ì²´í¬
  â”œâ”€ ì„¸íŠ¸ ì¶”ê°€/ì‚­ì œ ê°€ëŠ¥
  â””â”€ íƒ€ì´ë¨¸ ìë™ ì¹´ìš´íŠ¸ (1ì´ˆ interval)

"ì™„ë£Œ" ì‹œ:
  â””â”€ ì™„ë£Œëœ ì„¸íŠ¸ë§Œ í•„í„° â†’ workoutApi.completeSession(sessionId, sets) â†’ ë³µê·€

"ê·¸ë§Œí•˜ê¸°" ì‹œ:
  â””â”€ workoutApi.cancelSession(sessionId) â†’ ë³µê·€ (ê¸°ë¡ ì €ì¥ ì•ˆ ë¨)
```

**ìƒíƒœ ê´€ë¦¬ (useState):**
| ìƒíƒœ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `exercises` | `ActiveExercise[]` | ìš´ë™ ëª©ë¡ + ê° ì„¸íŠ¸ (weight/repsëŠ” string) |
| `currentIndex` | `number` | í˜„ì¬ ì„ íƒëœ ìš´ë™ ì¸ë±ìŠ¤ |
| `elapsedTime` | `number` | ê²½ê³¼ ì‹œê°„ (ì´ˆ) |
| `sessionId` | `number \| null` | ë°±ì—”ë“œ ì„¸ì…˜ ID |
| `routineTitle` | `string` | í—¤ë”ì— í‘œì‹œí•  ë£¨í‹´ ì œëª© |

### 3.7 í”„ë¡œí•„ íƒ­

#### í”„ë¡œí•„ ë©”ì¸ â€” `app/(tabs)/profile/index.tsx`

- `useAuth()`ì—ì„œ ìœ ì € ì •ë³´ ì¡°íšŒ
- ì•„ë°”íƒ€ + ë‹‰ë„¤ì„ + ì„±ë³„ ë°°ì§€ (ë‚¨ì„±/ì—¬ì„±)
- ì´ë©”ì¼, í‚¤(cm), ì²´ì¤‘(kg) í‘œì‹œ
- ì„¤ì • ì•„ì´ì½˜(âš™) â†’ `/(tabs)/profile/settings`
- "ìš´ë™ ê¸°ë¡ ë³´ê´€í•¨" ë©”ë‰´ â†’ `/(tabs)/profile/history`

#### ì„¤ì • â€” `app/(tabs)/profile/settings.tsx`

- "ë¡œê·¸ì•„ì›ƒ": í™•ì¸ Alert â†’ `useAuth().logout()` â†’ ë¡œê·¸ì¸ í™”ë©´
- "íšŒì› íƒˆí‡´": í™•ì¸ Alert (destructive) â†’ `useAuth().deleteAccount()` â†’ ë¡œê·¸ì¸ í™”ë©´

#### ìš´ë™ ê¸°ë¡ ëª©ë¡ â€” `app/(tabs)/profile/history/index.tsx`

- `workoutApi.getSessions()`ìœ¼ë¡œ ì „ì²´ ê¸°ë¡ ì¡°íšŒ
- í•„í„° ì¹©: ì „ì²´ / ë£¨í‹´ / ììœ  ìš´ë™ (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ í•„í„°)
- ì™„ë£Œì¼ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
- ìƒëŒ€ ë‚ ì§œ í‘œì‹œ (ì˜¤ëŠ˜/ì–´ì œ/Nì¼ ì „/ë‚ ì§œ)
- ì¹´ë“œ íƒ­ â†’ `/(tabs)/profile/history/[id]`

#### ìš´ë™ ê¸°ë¡ ìƒì„¸ â€” `app/(tabs)/profile/history/[id].tsx`

- `workoutApi.getSessionDetail(id)` â†’ `toWorkoutSessionDetail()` ë³€í™˜
- ìš”ì•½ ì¹´ë“œ: ì œëª©, ë£¨í‹´/ììœ  ë°°ì§€, 2Ã—2 í†µê³„ (ë‚ ì§œ, ìš´ë™ ì‹œê°„, ì´ ì„¸íŠ¸, ì´ ë³¼ë¥¨)
- ìš´ë™ë³„ ì¹´ë“œ: ìš´ë™ëª…, ë³¼ë¥¨ ì†Œê³„, ì„¸íŠ¸ í…Œì´ë¸” (ë²ˆí˜¸/ë¬´ê²Œ/íšŸìˆ˜)

---

## 4. ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ (components/)

### 4.1 AuthGuard.tsx â€” ë¼ìš°íŒ… ë³´í˜¸

```
isLoading ì¤‘            â†’ ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ
user ì—†ìŒ + auth ë°–     â†’ /(auth)/loginìœ¼ë¡œ ê°•ì œ ì´ë™
user ìˆìŒ + auth ì•ˆ     â†’ /(tabs)ë¡œ ê°•ì œ ì´ë™
ê·¸ ì™¸                   â†’ children ì •ìƒ ë Œë”ë§
```

í•µì‹¬ í›…:

- `useSegments()` â€” í˜„ì¬ URL ê²½ë¡œë¥¼ ë°°ì—´ë¡œ ë°˜í™˜
- `useRouter()` â€” `router.replace()`ë¡œ í™”ë©´ ì´ë™

### 4.2 ui/Button.tsx â€” ë²„íŠ¼

CVA (Class Variance Authority) íŒ¨í„´. variant(`default`, `outline`, `ghost`, `destructive`) Ã— size(`sm`, `default`, `lg`, `icon`) ì¡°í•©. `loading` ì‹œ ìŠ¤í”¼ë„ˆ í‘œì‹œ.

### 4.3 ui/Input.tsx â€” í…ìŠ¤íŠ¸ ì…ë ¥

`TextInput` ë˜í•‘. ë‹¤í¬ í…Œë§ˆ ìŠ¤íƒ€ì¼ ê¸°ë³¸ ì ìš©. `forwardRef`ë¡œ ì™¸ë¶€ í¬ì»¤ìŠ¤ ì œì–´ ê°€ëŠ¥.

### 4.4 ui/Card.tsx â€” ì¹´ë“œ ì»¨í…Œì´ë„ˆ

`View`ì— `rounded-2xl bg-card p-4` ê¸°ë³¸ ì ìš©.

### 4.5 ui/Label.tsx â€” í¼ ë¼ë²¨

`Text`ì— `text-sm text-muted-foreground` ê¸°ë³¸ ì ìš©.

---

## 5. ì „ì—­ ìƒíƒœ ê´€ë¦¬ (contexts/)

### auth-context.tsx

React Context API íŒ¨í„´ìœ¼ë¡œ ì¸ì¦ ìƒíƒœ ê´€ë¦¬.

| ì´ë¦„              | íƒ€ì…                   | ì„¤ëª…                                    |
| ----------------- | ---------------------- | --------------------------------------- |
| `user`            | `UserResponse \| null` | í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´               |
| `isLoading`       | `boolean`              | ì•± ì‹œì‘ ì‹œ í† í° í™•ì¸ ì¤‘ ì—¬ë¶€            |
| `login(data)`     | í•¨ìˆ˜                   | ë¡œê·¸ì¸ â†’ user ìƒíƒœ ì„¤ì •                 |
| `signup(data)`    | í•¨ìˆ˜                   | íšŒì›ê°€ì… â†’ ìë™ ë¡œê·¸ì¸ â†’ user ìƒíƒœ ì„¤ì • |
| `logout()`        | í•¨ìˆ˜                   | API ë¡œê·¸ì•„ì›ƒ â†’ userë¥¼ nullë¡œ            |
| `deleteAccount()` | í•¨ìˆ˜                   | íšŒì›íƒˆí‡´ â†’ userë¥¼ nullë¡œ                |

```tsx
const { user, login, logout } = useAuth();
```

---

## 6. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ìœ í‹¸ë¦¬í‹° (lib/)

### 6.1 constants.ts â€” ìƒìˆ˜ ì •ì˜

```ts
API_URL  â†’ .envì˜ EXPO_PUBLIC_API_URL (ê¸°ë³¸ê°’: http://localhost:8080)
COLORS   â†’ { background, card, primary, primaryHover, border, mutedForeground, destructive, white }
```

`tailwind.config.js`ì˜ ìƒ‰ìƒê³¼ ë™ì¼í•œ ê°’. Tailwind classNameìœ¼ë¡œ ì•ˆ ë˜ëŠ” ê³³ì—ì„œ ì‚¬ìš©.

### 6.2 format.ts â€” ë‚ ì§œ/ì‹œê°„ í¬ë§· ìœ í‹¸

| í•¨ìˆ˜                             | í¬ë§·                                    | ìš©ë„                |
| -------------------------------- | --------------------------------------- | ------------------- |
| `formatDate(dateString)`         | "2024ë…„ 3ì›” 15ì¼"                       | ë£¨í‹´ ëª©ë¡ ìƒì„±ì¼ ë“± |
| `formatRelativeDate(dateString)` | "ì˜¤ëŠ˜" / "ì–´ì œ" / "3ì¼ ì „" / "3ì›” 15ì¼" | ìš´ë™ ê¸°ë¡ ëª©ë¡      |
| `formatRestTime(seconds)`        | "1ë¶„ 30ì´ˆ" / "0ì´ˆ" / "2ë¶„"              | ë£¨í‹´ íœ´ì‹ ì‹œê°„ í‘œì‹œ |
| `formatElapsedTime(seconds)`     | "01:23:45"                              | ìš´ë™ ì„¸ì…˜ íƒ€ì´ë¨¸    |

### 6.3 utils.ts â€” cn() ìœ í‹¸ë¦¬í‹°

```ts
cn("text-white", isActive && "text-primary", className);
```

`clsx` + `twMerge`ë¡œ ì¡°ê±´ë¶€ í´ë˜ìŠ¤ ì¡°í•© ë° Tailwind ì¶©ëŒ í•´ê²°.

### 6.4 api.ts â€” HTTP í´ë¼ì´ì–¸íŠ¸

| í•¨ìˆ˜                         | ì—­í•                                                          |
| ---------------------------- | ------------------------------------------------------------ |
| `apiFetch<T>(path, options)` | ëª¨ë“  API í˜¸ì¶œì˜ ê³µí†µ ë˜í¼. í† í° ìë™ ë¶€ì°© + 401 ì‹œ ìë™ ê°±ì‹  |
| `refreshAccessToken()`       | refreshTokenìœ¼ë¡œ ìƒˆ accessToken ë°œê¸‰                         |
| `setTokens(access, refresh)` | SecureStoreì— í† í° ì €ì¥                                      |
| `clearTokens()`              | SecureStoreì—ì„œ í† í° ì‚­ì œ                                    |
| `hasTokens()`                | í† í° ì¡´ì¬ ì—¬ë¶€ í™•ì¸                                          |

### 6.5 api/auth.ts â€” ì¸ì¦ API

| í•¨ìˆ˜                   | ë©”ì„œë“œ | ê²½ë¡œ                 | ë™ì‘                  |
| ---------------------- | ------ | -------------------- | --------------------- |
| `authApi.login(data)`  | POST   | `/api/auth/login`    | ë¡œê·¸ì¸ â†’ í† í° ì €ì¥    |
| `authApi.signup(data)` | POST   | `/api/auth/signup`   | íšŒì›ê°€ì…              |
| `authApi.me()`         | GET    | `/api/auth/me`       | í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ |
| `authApi.logout()`     | POST   | `/api/auth/logout`   | ë¡œê·¸ì•„ì›ƒ â†’ í† í° ì‚­ì œ  |
| `authApi.deleteMe()`   | DELETE | `/api/auth/deleteMe` | íšŒì›íƒˆí‡´ â†’ í† í° ì‚­ì œ  |

### 6.6 api/exercise.ts â€” ìš´ë™ ì¢…ëª© API

| í•¨ìˆ˜                         | ë©”ì„œë“œ | ê²½ë¡œ             | ë™ì‘                |
| ---------------------------- | ------ | ---------------- | ------------------- |
| `exerciseApi.getExercises()` | GET    | `/api/exercises` | ì „ì²´ ìš´ë™ ì¢…ëª© ì¡°íšŒ |

### 6.7 api/routine.ts â€” ë£¨í‹´ API

| í•¨ìˆ˜                              | ë©”ì„œë“œ | ê²½ë¡œ                | ë™ì‘                       |
| --------------------------------- | ------ | ------------------- | -------------------------- |
| `routineApi.getRoutines()`        | GET    | `/api/routines`     | ë£¨í‹´ ëª©ë¡ ì¡°íšŒ             |
| `routineApi.getRoutineDetail(id)` | GET    | `/api/routines/:id` | ë£¨í‹´ ìƒì„¸ (ìš´ë™ êµ¬ì„± í¬í•¨) |
| `routineApi.createRoutine(req)`   | POST   | `/api/routines`     | ë£¨í‹´ ìƒì„±                  |
| `routineApi.deleteRoutine(id)`    | DELETE | `/api/routines/:id` | ë£¨í‹´ ì‚­ì œ                  |

### 6.8 api/workout.ts â€” ìš´ë™ ì„¸ì…˜ API

| í•¨ìˆ˜                                   | ë©”ì„œë“œ | ê²½ë¡œ                                  | ë™ì‘                         |
| -------------------------------------- | ------ | ------------------------------------- | ---------------------------- |
| `workoutApi.getSessions()`             | GET    | `/api/workouts/sessions`              | ì„¸ì…˜ ëª©ë¡ (page=0, size=100) |
| `workoutApi.getSessionDetail(id)`      | GET    | `/api/workouts/sessions/:id`          | ì„¸ì…˜ ìƒì„¸ (ìš´ë™/ì„¸íŠ¸ í¬í•¨)   |
| `workoutApi.startSession(routineId)`   | POST   | `/api/workouts/sessions`              | ì„¸ì…˜ ìƒì„± ë° ì‹œì‘            |
| `workoutApi.completeSession(id, body)` | PATCH  | `/api/workouts/sessions/:id/complete` | ì„¸íŠ¸ ê¸°ë¡ í›„ ì„¸ì…˜ ì™„ë£Œ       |
| `workoutApi.cancelSession(id)`         | DELETE | `/api/workouts/sessions/:id/cancel`   | ì„¸ì…˜ ì·¨ì†Œ (ê¸°ë¡ ì‚­ì œ)        |

### 6.9 store/exercise-selection.ts â€” ìš´ë™ ì„ íƒ ì„ì‹œ ì €ì¥ì†Œ

í™”ë©´ ê°„ ìš´ë™ ì„ íƒ ë°ì´í„° ì „ë‹¬ì„ ìœ„í•œ ëª¨ë“ˆ ë ˆë²¨ ì €ì¥ì†Œ.

| í•¨ìˆ˜                              | ë™ì‘                                              |
| --------------------------------- | ------------------------------------------------- |
| `setSelectedExercises(exercises)` | ì„ íƒëœ ìš´ë™ ëª©ë¡ ì €ì¥                             |
| `getSelectedExercises()`          | ì €ì¥ëœ ìš´ë™ ëª©ë¡ ë°˜í™˜ í›„ ì¦‰ì‹œ ì´ˆê¸°í™” (1íšŒì„± ì½ê¸°) |

Contextë‚˜ AsyncStorageë³´ë‹¤ ê°€ë³ê³ , ê°™ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ í˜ì´ì§€ ê°„ ì „ë‹¬ì— ì í•©. `select-exercises` â†’ `new` í™”ë©´ ê°„ ë°ì´í„° ì „ë‹¬ì— ì‚¬ìš©.

### 6.10 types/auth.ts â€” ì¸ì¦ íƒ€ì…

| íƒ€ì…            | ìš©ë„                                                                        |
| --------------- | --------------------------------------------------------------------------- |
| `SignupRequest` | íšŒì›ê°€ì… ìš”ì²­ (username, password, email, nickname, gender, height, weight) |
| `LoginRequest`  | ë¡œê·¸ì¸ ìš”ì²­ (username, password)                                            |
| `UserResponse`  | ì‚¬ìš©ì ì •ë³´ ì‘ë‹µ                                                            |
| `LoginResponse` | ë¡œê·¸ì¸ ì‘ë‹µ (userResponse, accessToken, refreshToken)                       |

### 6.11 types/exercise.ts â€” ìš´ë™ ì¢…ëª© íƒ€ì…

| íƒ€ì…/ìƒìˆ˜          | ìš©ë„                                                                                                |
| ------------------ | --------------------------------------------------------------------------------------------------- |
| `BodyPart`         | ìš´ë™ ë¶€ìœ„ ìœ ë‹ˆì˜¨ íƒ€ì… (`CHEST \| SHOULDER \| BACK \| ARM \| LOWER_BODY \| CORE \| CARDIO \| OTHER`) |
| `BODY_PART_LABEL`  | BodyPart â†’ í•œê¸€ ë§¤í•‘ (`CHEST` â†’ "ê°€ìŠ´" ë“±)                                                          |
| `BODY_PARTS`       | ë¶€ìœ„ ëª©ë¡ ë°°ì—´ (UI ìˆœì„œëŒ€ë¡œ)                                                                        |
| `ExerciseResponse` | ìš´ë™ ì¢…ëª© ì‘ë‹µ (id, name, bodyPart, partDetail, custom)                                             |

### 6.12 types/routine.ts â€” ë£¨í‹´ íƒ€ì…

| íƒ€ì…                       | ìš©ë„                                                                               |
| -------------------------- | ---------------------------------------------------------------------------------- |
| `RoutineItemRes`           | ë£¨í‹´ ìš´ë™ í•­ëª© (exerciseId, exerciseName, bodyPart, partDetail, sets, restSeconds) |
| `RoutineListItem`          | ë£¨í‹´ ëª©ë¡ ì•„ì´í…œ (id, title, description, active, createdAt, updatedAt)            |
| `RoutineDetail`            | ë£¨í‹´ ìƒì„¸ (RoutineListItem + routineItems[])                                       |
| `RoutineItemCreateRequest` | ë£¨í‹´ ìš´ë™ ìƒì„± ìš”ì²­ (exerciseId, sets, restSeconds)                                |
| `RoutineCreateRequest`     | ë£¨í‹´ ìƒì„± ìš”ì²­ (title, description, routineItems[])                                |

### 6.13 types/workout.ts â€” ìš´ë™ ì„¸ì…˜ íƒ€ì…

**ë°±ì—”ë“œ ì‘ë‹µ íƒ€ì…:**

| íƒ€ì…                            | ìš©ë„                                                                          |
| ------------------------------- | ----------------------------------------------------------------------------- |
| `WorkoutSessionListItemRes`     | ì„¸ì…˜ ëª©ë¡ ì•„ì´í…œ (sessionId, routineId, routineTitle, startedAt, completedAt) |
| `PageWorkoutSessionListItemRes` | í˜ì´ì§€ë„¤ì´ì…˜ ë˜í¼ (content[], totalPages, totalElements, first, last)         |
| `WorkoutSetRes`                 | ì„¸íŠ¸ ì‘ë‹µ (setId, setNumber, weight, reps)                                    |
| `WorkoutExerciseRes`            | ìš´ë™ ì‘ë‹µ (exerciseId, exerciseName, sets[])                                  |
| `WorkoutSessionDetailRes`       | ì„¸ì…˜ ìƒì„¸ ì‘ë‹µ (exercises[] í¬í•¨)                                             |

**ì„¸ì…˜ ìš”ì²­ íƒ€ì…:**

| íƒ€ì…                        | ìš©ë„                                                                 |
| --------------------------- | -------------------------------------------------------------------- |
| `WorkoutSessionStartReq`    | ì„¸ì…˜ ì‹œì‘ ìš”ì²­ `{ routineId }`                                       |
| `WorkoutSessionStartRes`    | ì„¸ì…˜ ì‹œì‘ ì‘ë‹µ (id, routineId, routineTitle, startedAt, completedAt) |
| `WorkoutSetCompleteReq`     | ì„¸íŠ¸ ì™„ë£Œ ë°ì´í„° `{ exerciseId, setNumber, weight, reps }`           |
| `WorkoutSessionCompleteReq` | ì„¸ì…˜ ì™„ë£Œ ìš”ì²­ `{ action: "RECORD_ONLY", sets[] }`                   |

**í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ íƒ€ì… (ìš´ë™ ì¤‘):**

| íƒ€ì…             | ìš©ë„                                                                       |
| ---------------- | -------------------------------------------------------------------------- |
| `ActiveExercise` | ìš´ë™ ì¤‘ ìš´ë™ ìƒíƒœ (id, exerciseId, name, sets[])                           |
| `ActiveSet`      | ìš´ë™ ì¤‘ ì„¸íŠ¸ ìƒíƒœ (id, setNumber, weight: string, reps: string, completed) |

**ì•± í‘œì‹œ íƒ€ì… (ê¸°ë¡ ì¡°íšŒ):**

| íƒ€ì…                   | ìš©ë„                                                           |
| ---------------------- | -------------------------------------------------------------- |
| `WorkoutSession`       | ë³€í™˜ëœ ì„¸ì…˜ (id, title, type, completedAt)                     |
| `WorkoutSessionDetail` | ë³€í™˜ëœ ìƒì„¸ (elapsedTime, totalSets, totalVolume, exercises[]) |

**ë³€í™˜ í•¨ìˆ˜:**

- `toWorkoutSession(res)` â†’ ëª©ë¡ìš© ë³€í™˜
- `toWorkoutSessionDetail(res)` â†’ ìƒì„¸ìš© ë³€í™˜ (ê²½ê³¼ì‹œê°„/ì´ì„¸íŠ¸/ì´ë³¼ë¥¨ ê³„ì‚°)

### 6.14 validations/auth.ts â€” í¼ ìœ íš¨ì„± ê²€ì¦

| ìŠ¤í‚¤ë§ˆ              | ê²€ì¦ ê·œì¹™                                                  |
| ------------------- | ---------------------------------------------------------- |
| `loginSchema`       | ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ í•„ìˆ˜ ì…ë ¥                                  |
| `signupStep1Schema` | ì•„ì´ë”” 4~20ì, ë¹„ë°€ë²ˆí˜¸ 8~30ì, ì´ë©”ì¼ í˜•ì‹, ë‹‰ë„¤ì„ 2~10ì |
| `signupStep2Schema` | ì„±ë³„ ì„ íƒ í•„ìˆ˜, í‚¤ 100~250cm, ì²´ì¤‘ 30~300kg                |

---

## 7. ì¸ì¦ êµ¬ì¡°ì™€ íë¦„

### 7.1 ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen     â”‚ â”€â”€â–¶ â”‚  AuthContext  â”‚ â”€â”€â–¶ â”‚  authApi     â”‚ â”€â”€â–¶ â”‚ apiFetch â”‚ â”€â”€â–¶ Backend
â”‚  (login.tsx)â”‚     â”‚  (ìƒíƒœ ê´€ë¦¬)   â”‚     â”‚  (API í˜¸ì¶œ)   â”‚     â”‚ (HTTP)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                                       â”‚
                           â”‚                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â””â”€â”€ user ìƒíƒœ ê°±ì‹                 â”‚ SecureStore  â”‚
                                                            â”‚ (í† í° ì €ì¥)   â”‚
                                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 í† í° ì €ì¥

`expo-secure-store`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ê¸°ì˜ ì•”í˜¸í™”ëœ ì €ì¥ì†Œì— í† í°ì„ ë³´ê´€í•œë‹¤.

| í‚¤                     | ìš©ë„                          |
| ---------------------- | ----------------------------- |
| `prolog_access_token`  | API ìš”ì²­ ì¸ì¦ìš© (ì§§ì€ ìˆ˜ëª…)   |
| `prolog_refresh_token` | access token ê°±ì‹ ìš© (ê¸´ ìˆ˜ëª…) |

### 7.3 API ìš”ì²­ íë¦„ (apiFetch)

**ìš”ì²­ ì‹œ:**

1. SecureStoreì—ì„œ accessTokenì„ êº¼ëƒ„
2. `Authorization: Bearer {token}` í—¤ë”ë¥¼ ìë™ ë¶€ì°©
3. `API_URL + path`ë¡œ fetch ì‹¤í–‰

**ì‘ë‹µ ì²˜ë¦¬:**

- 200~299 â†’ JSON íŒŒì‹± í›„ ë°˜í™˜
- 204 â†’ undefined ë°˜í™˜ (No Content)
- 401 (login/refresh ì œì™¸) â†’ í† í° ê°±ì‹  ì‹œë„ í›„ ì¬ìš”ì²­
- ê·¸ ì™¸ ì—ëŸ¬ â†’ `ApiError` throw

### 7.4 í† í° ìë™ ê°±ì‹ 

```
ìš”ì²­ â†’ 401 ì‘ë‹µ
  â””â”€ refreshAccessToken() í˜¸ì¶œ
       â””â”€ POST /api/auth/refresh (refreshToken ì „ì†¡)
            â”œâ”€ ì„±ê³µ â†’ ìƒˆ í† í° ì €ì¥ â†’ ì›ë˜ ìš”ì²­ ì¬ì‹œë„
            â””â”€ ì‹¤íŒ¨ â†’ í† í° ì‚­ì œ â†’ "ì¸ì¦ ë§Œë£Œ" ì—ëŸ¬ throw
```

`refreshPromise` ë³€ìˆ˜ë¡œ ë™ì‹œì— ì—¬ëŸ¬ ìš”ì²­ì´ 401ì„ ë°›ì•„ë„ **ê°±ì‹  ìš”ì²­ì€ 1ë²ˆë§Œ** ì‹¤í–‰.

---

## 8. ì£¼ìš” ê¸°ëŠ¥ë³„ íë¦„

### 8.1 ë£¨í‹´ ê´€ë¦¬ íë¦„

```
ë£¨í‹´ íƒ­ ì§„ì… (useFocusEffectë¡œ ë§¤ë²ˆ ê°±ì‹ )
  â””â”€ routineApi.getRoutines() â†’ ëª©ë¡ í‘œì‹œ
       â”œâ”€ "+" ë²„íŠ¼ â†’ ë£¨í‹´ ìƒì„± í™”ë©´ (routine/new)
       â””â”€ ì¹´ë“œ íƒ­ â†’ routineApi.getRoutineDetail(id) â†’ ìƒì„¸ í‘œì‹œ
            â”œâ”€ ìš´ë™ êµ¬ì„± (ìš´ë™ëª…, ë¶€ìœ„, ì„¸íŠ¸ ìˆ˜, íœ´ì‹ ì‹œê°„)
            â”œâ”€ "ìš´ë™ ì‹œì‘" â†’ ìš´ë™ ì„¸ì…˜ í™”ë©´ìœ¼ë¡œ ì´ë™
            â””â”€ "ë£¨í‹´ ì‚­ì œ" â†’ í™•ì¸ â†’ API ì‚­ì œ â†’ ëª©ë¡ ë³µê·€

ë£¨í‹´ ìƒì„± (routine/new):
  â”œâ”€ ì´ë¦„/ì„¤ëª… ì…ë ¥
  â”œâ”€ "ì¢…ëª© ì¶”ê°€" â†’ ìš´ë™ ì„ íƒ í™”ë©´ (routine/select-exercises)
  â”‚    â”œâ”€ exerciseApi.getExercises() â†’ ìš´ë™ ëª©ë¡ ë¡œë“œ
  â”‚    â”œâ”€ ë¶€ìœ„ í•„í„° + ê²€ìƒ‰ìœ¼ë¡œ í•„í„°ë§
  â”‚    â”œâ”€ ë‹¤ì¤‘ ì„ íƒ í›„ "í™•ì¸" â†’ exercise-selection ì €ì¥ì†Œì— ì €ì¥ â†’ ë³µê·€
  â”‚    â””â”€ useFocusEffectì—ì„œ ì €ì¥ì†Œ ì½ê¸° â†’ itemsì— ì¶”ê°€
  â”œâ”€ ì„¸íŠ¸ ìˆ˜/íœ´ì‹ ì‹œê°„ Â± ì¡°ì ˆ
  â”œâ”€ ìš´ë™ ìˆœì„œ ë³€ê²½ (â†‘â†“) / ì‚­ì œ
  â””â”€ "ì €ì¥" â†’ routineApi.createRoutine() â†’ ë£¨í‹´ ëª©ë¡ìœ¼ë¡œ ë³µê·€
```

### 8.2 ìš´ë™ ì„¸ì…˜ íë¦„

```
ë£¨í‹´ ìƒì„¸ â†’ "ìš´ë™ ì‹œì‘" ë²„íŠ¼
  â””â”€ workout/session?routineId=<id>

ì„¸ì…˜ ì´ˆê¸°í™” (ë³‘ë ¬ ì‹¤í–‰):
  â”œâ”€ routineApi.getRoutineDetail(routineId) â†’ exercises ì´ˆê¸°í™”
  â””â”€ workoutApi.startSession(routineId) â†’ sessionId ì €ì¥

ìš´ë™ ê¸°ë¡:
  â”œâ”€ ìš´ë™ íƒ­ ì „í™˜ (íš¡ ìŠ¤í¬ë¡¤)
  â”œâ”€ ì„¸íŠ¸ë³„ ë¬´ê²Œ/íšŸìˆ˜ ì…ë ¥ â†’ ì™„ë£Œ ì²´í¬(âœ“)
  â”œâ”€ ì„¸íŠ¸ ì¶”ê°€/ì‚­ì œ
  â”œâ”€ "ë‹¤ìŒ ìš´ë™" ë²„íŠ¼
  â””â”€ íƒ€ì´ë¨¸ ìë™ ì¹´ìš´íŠ¸

ì¢…ë£Œ:
  â”œâ”€ "ì™„ë£Œ" â†’ ì™„ë£Œëœ ì„¸íŠ¸ í•„í„° â†’ PATCH complete (action: RECORD_ONLY) â†’ ë³µê·€
  â””â”€ "ê·¸ë§Œí•˜ê¸°" â†’ DELETE cancel â†’ ë³µê·€ (ê¸°ë¡ ì—†ìŒ)
```

### 8.3 ìš´ë™ ê¸°ë¡ ì¡°íšŒ íë¦„

```
í”„ë¡œí•„ â†’ "ìš´ë™ ê¸°ë¡ ë³´ê´€í•¨"
  â””â”€ workoutApi.getSessions() â†’ ëª©ë¡ í‘œì‹œ
       â”œâ”€ í•„í„°: ì „ì²´ / ë£¨í‹´ / ììœ  ìš´ë™
       â””â”€ ì¹´ë“œ íƒ­ â†’ workoutApi.getSessionDetail(id) â†’ ìƒì„¸ í‘œì‹œ
            â”œâ”€ ìš”ì•½ í†µê³„ (ë‚ ì§œ, ìš´ë™ ì‹œê°„, ì´ ì„¸íŠ¸, ì´ ë³¼ë¥¨)
            â””â”€ ìš´ë™ë³„ ì„¸íŠ¸ í…Œì´ë¸”
```

### 8.4 í”„ë¡œí•„ ê´€ë¦¬ íë¦„

```
í”„ë¡œí•„ íƒ­ â†’ ìœ ì € ì •ë³´ í‘œì‹œ (ë‹‰ë„¤ì„, ì„±ë³„, ì´ë©”ì¼, í‚¤, ì²´ì¤‘)
  â”œâ”€ ì„¤ì •(âš™) â†’ ë¡œê·¸ì•„ì›ƒ / íšŒì› íƒˆí‡´
  â””â”€ "ìš´ë™ ê¸°ë¡ ë³´ê´€í•¨" â†’ ê¸°ë¡ ëª©ë¡/ìƒì„¸
```

---

## 9. ê°œë°œ íŒ¨í„´ ê°€ì´ë“œ

### 9.1 ìƒˆ í™”ë©´ ì¶”ê°€í•˜ê¸°

```
app/(tabs)/workout/detail.tsx â†’ /workout/detail ê²½ë¡œë¡œ ì ‘ê·¼ ê°€ëŠ¥
app/(tabs)/workout/[id].tsx   â†’ /workout/123 ê°™ì€ ë™ì  ê²½ë¡œ
```

íŒŒì¼ì„ ë§Œë“¤ê¸°ë§Œ í•˜ë©´ ìë™ìœ¼ë¡œ ë¼ìš°íŒ…ì´ ë“±ë¡ëœë‹¤.

### 9.2 ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì—°ê²°í•˜ê¸°

```
1. lib/types/ì— ìš”ì²­/ì‘ë‹µ íƒ€ì… ì •ì˜
2. lib/api/ì— API í•¨ìˆ˜ ì¶”ê°€ (apiFetch ì‚¬ìš©)
3. í™”ë©´ì—ì„œ í˜¸ì¶œ
```

### 9.3 ìƒˆ UI ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

```
1. components/ui/ì— íŒŒì¼ ìƒì„±
2. cn()ìœ¼ë¡œ className í•©ì„±
3. CVAë¡œ variant íŒ¨í„´ ì ìš© (í•„ìš” ì‹œ)
```

### 9.4 ìƒˆ ì „ì—­ ìƒíƒœ ì¶”ê°€í•˜ê¸°

```
1. contexts/ì— ìƒˆ context íŒŒì¼ ìƒì„±
2. app/_layout.tsxì—ì„œ Provider ê°ì‹¸ê¸°
3. í™”ë©´ì—ì„œ useXxx() í›…ìœ¼ë¡œ ì ‘ê·¼
```

### 9.5 í¼ ë§Œë“¤ê¸° íŒ¨í„´

`react-hook-form` + `zod` ì‚¬ìš©:

```
1. lib/validations/ì— zod ìŠ¤í‚¤ë§ˆ ì •ì˜
2. useForm({ resolver: zodResolver(schema) })
3. Controllerë¡œ ê° Input ê°ì‹¸ê¸°
4. handleSubmit(onSubmit)ìœ¼ë¡œ ì œì¶œ
```

### 9.6 ì£¼ìš” ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬

| ë¼ì´ë¸ŒëŸ¬ë¦¬                       | ì—­í•                                       |
| -------------------------------- | ----------------------------------------- |
| `expo-router`                    | íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ… (Stack, Tabs ë„¤ë¹„ê²Œì´ì…˜) |
| `nativewind`                     | React Nativeì—ì„œ Tailwind CSS ì‚¬ìš©        |
| `react-hook-form`                | í¼ ìƒíƒœ ê´€ë¦¬ (ì…ë ¥ê°’, ì—ëŸ¬, ì œì¶œ)         |
| `zod`                            | ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ìœ íš¨ì„± ê²€ì¦                   |
| `@hookform/resolvers`            | zod â†” react-hook-form ì—°ê²°                |
| `expo-secure-store`              | í† í° ë“± ë¯¼ê° ë°ì´í„° ì•”í˜¸í™” ì €ì¥           |
| `lucide-react-native`            | ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬                         |
| `class-variance-authority`       | ì»´í¬ë„ŒíŠ¸ variant íŒ¨í„´ (Button ë“±)         |
| `clsx` + `tailwind-merge`        | ì¡°ê±´ë¶€ className ì¡°í•©                     |
| `react-native-safe-area-context` | ë…¸ì¹˜/í™ˆë°” ì˜ì—­ ëŒ€ì‘                       |
| `react-native-screens`           | ë„¤ì´í‹°ë¸Œ í™”ë©´ ì „í™˜ ìµœì í™”                 |
| `react-native-reanimated`        | ë„¤ì´í‹°ë¸Œ ì• ë‹ˆë©”ì´ì…˜                       |

---

## ë¯¸êµ¬í˜„ ê¸°ëŠ¥

| í•­ëª©                  | ìƒíƒœ                                    |
| --------------------- | --------------------------------------- |
| í™ˆ íƒ­                 | í”Œë ˆì´ìŠ¤í™€ë”                            |
| ì»¤ë®¤ë‹ˆí‹° íƒ­           | í”Œë ˆì´ìŠ¤í™€ë”                            |
| ë£¨í‹´ ìˆ˜ì •             | ë£¨í‹´ ìƒì„±ì€ êµ¬í˜„ë¨, ìˆ˜ì •(í¸ì§‘)ì€ ë¯¸êµ¬í˜„ |
| ììœ  ìš´ë™ (ë£¨í‹´ ì—†ì´) | ë¯¸êµ¬í˜„                                  |
| ì»¤ìŠ¤í…€ ìš´ë™ ì¢…ëª© ì¶”ê°€ | ë¯¸êµ¬í˜„ (ë°±ì—”ë“œ API í™•ì¸ í•„ìš”)           |
